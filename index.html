<html>



  <head>
    <title>My Twitter</title>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>

  </head>





  <body id="body" >
    <div class="tweet-box">
      <textarea id="tweet-text" placeholder="توئیت خود را وارد کنید"></textarea>
    </div>

    <button py-click="submitTweet()">توئیت</button>


    <py-config>
      packages = ["requests"]
      [[fetch]]
      files = ["/test.txt"]
    </py-config>
    

    <py-script>
      import asyncio
      from pyodide.http import pyfetch



      response = await pyfetch(url="https://www.google.com", method="GET")
      asyncio.ensure_future()
      output = f"GET request=> status:{response.status}, json:{await response.json()}"

      display(output)
      
      
      

      

      

      def submitTweet():
        
        
        from datetime import datetime
        now = datetime.now()
        time = now.strftime("%d/%m/%Y %H:%M:%S")
        
        
        
        


        display(Element('tweet-text').element.value + " ----------> " + time + r.status_code, target="body")




        Element('tweet-text').element.value = ""
    </py-script>







  </body>
</html>
